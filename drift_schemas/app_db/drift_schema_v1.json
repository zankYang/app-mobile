{
  "_meta": {
    "description": "This file contains a serialized version of schema entities for drift.",
    "version": "1.3.0"
  },
  "options": {
    "store_date_time_values_as_text": false
  },
  "entities": [
    {
      "id": 0,
      "references": [],
      "type": "table",
      "data": {
        "name": "users",
        "was_declared_in_moor": false,
        "columns": [
          {
            "name": "id",
            "getter_name": "id",
            "moor_type": "int",
            "nullable": false,
            "customConstraints": null,
            "defaultConstraints": "PRIMARY KEY AUTOINCREMENT",
            "dialectAwareDefaultConstraints": {
              "sqlite": "PRIMARY KEY AUTOINCREMENT"
            },
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": [
              "auto-increment"
            ]
          },
          {
            "name": "username",
            "getter_name": "username",
            "moor_type": "string",
            "nullable": false,
            "customConstraints": null,
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": []
          },
          {
            "name": "email",
            "getter_name": "email",
            "moor_type": "string",
            "nullable": false,
            "customConstraints": null,
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": []
          },
          {
            "name": "password",
            "getter_name": "password",
            "moor_type": "string",
            "nullable": false,
            "customConstraints": null,
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": []
          },
          {
            "name": "role",
            "getter_name": "role",
            "moor_type": "string",
            "nullable": false,
            "customConstraints": null,
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": []
          },
          {
            "name": "name",
            "getter_name": "name",
            "moor_type": "string",
            "nullable": false,
            "customConstraints": null,
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": []
          },
          {
            "name": "lastname",
            "getter_name": "lastname",
            "moor_type": "string",
            "nullable": false,
            "customConstraints": null,
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": []
          },
          {
            "name": "phone",
            "getter_name": "phone",
            "moor_type": "string",
            "nullable": true,
            "customConstraints": null,
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": []
          },
          {
            "name": "created_at",
            "getter_name": "createdAt",
            "moor_type": "dateTime",
            "nullable": false,
            "customConstraints": null,
            "default_dart": "const CustomExpression('CAST(strftime(\\'%s\\', CURRENT_TIMESTAMP) AS INTEGER)')",
            "default_client_dart": null,
            "dsl_features": []
          },
          {
            "name": "deleted_at",
            "getter_name": "deletedAt",
            "moor_type": "dateTime",
            "nullable": true,
            "customConstraints": null,
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": []
          }
        ],
        "is_virtual": false,
        "without_rowid": false,
        "constraints": [],
        "unique_keys": [
          [
            "username"
          ],
          [
            "email"
          ]
        ]
      }
    },
    {
      "id": 1,
      "references": [
        0
      ],
      "type": "table",
      "data": {
        "name": "classes",
        "was_declared_in_moor": false,
        "columns": [
          {
            "name": "id",
            "getter_name": "id",
            "moor_type": "int",
            "nullable": false,
            "customConstraints": null,
            "defaultConstraints": "PRIMARY KEY AUTOINCREMENT",
            "dialectAwareDefaultConstraints": {
              "sqlite": "PRIMARY KEY AUTOINCREMENT"
            },
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": [
              "auto-increment"
            ]
          },
          {
            "name": "teacher_user_id",
            "getter_name": "teacherUserId",
            "moor_type": "int",
            "nullable": false,
            "customConstraints": null,
            "defaultConstraints": "REFERENCES users (id)",
            "dialectAwareDefaultConstraints": {
              "sqlite": "REFERENCES users (id)"
            },
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": [
              {
                "foreign_key": {
                  "to": {
                    "table": "users",
                    "column": "id"
                  },
                  "initially_deferred": false,
                  "on_update": null,
                  "on_delete": null
                }
              }
            ]
          },
          {
            "name": "name",
            "getter_name": "name",
            "moor_type": "string",
            "nullable": false,
            "customConstraints": null,
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": []
          },
          {
            "name": "description",
            "getter_name": "description",
            "moor_type": "string",
            "nullable": true,
            "customConstraints": null,
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": []
          },
          {
            "name": "capacity",
            "getter_name": "capacity",
            "moor_type": "int",
            "nullable": false,
            "customConstraints": null,
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": []
          },
          {
            "name": "enrollment_open",
            "getter_name": "enrollmentOpen",
            "moor_type": "bool",
            "nullable": false,
            "customConstraints": null,
            "defaultConstraints": "CHECK (\"enrollment_open\" IN (0, 1))",
            "dialectAwareDefaultConstraints": {
              "sqlite": "CHECK (\"enrollment_open\" IN (0, 1))"
            },
            "default_dart": "const CustomExpression('1')",
            "default_client_dart": null,
            "dsl_features": []
          },
          {
            "name": "start_date",
            "getter_name": "startDate",
            "moor_type": "dateTime",
            "nullable": true,
            "customConstraints": null,
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": []
          },
          {
            "name": "end_date",
            "getter_name": "endDate",
            "moor_type": "dateTime",
            "nullable": true,
            "customConstraints": null,
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": []
          },
          {
            "name": "created_at",
            "getter_name": "createdAt",
            "moor_type": "dateTime",
            "nullable": false,
            "customConstraints": null,
            "default_dart": "const CustomExpression('CAST(strftime(\\'%s\\', CURRENT_TIMESTAMP) AS INTEGER)')",
            "default_client_dart": null,
            "dsl_features": []
          },
          {
            "name": "deleted_at",
            "getter_name": "deletedAt",
            "moor_type": "dateTime",
            "nullable": true,
            "customConstraints": null,
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": []
          }
        ],
        "is_virtual": false,
        "without_rowid": false,
        "constraints": []
      }
    },
    {
      "id": 2,
      "references": [
        0,
        1
      ],
      "type": "table",
      "data": {
        "name": "enrollments",
        "was_declared_in_moor": false,
        "columns": [
          {
            "name": "id",
            "getter_name": "id",
            "moor_type": "int",
            "nullable": false,
            "customConstraints": null,
            "defaultConstraints": "PRIMARY KEY AUTOINCREMENT",
            "dialectAwareDefaultConstraints": {
              "sqlite": "PRIMARY KEY AUTOINCREMENT"
            },
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": [
              "auto-increment"
            ]
          },
          {
            "name": "student_user_id",
            "getter_name": "studentUserId",
            "moor_type": "int",
            "nullable": false,
            "customConstraints": null,
            "defaultConstraints": "REFERENCES users (id)",
            "dialectAwareDefaultConstraints": {
              "sqlite": "REFERENCES users (id)"
            },
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": [
              {
                "foreign_key": {
                  "to": {
                    "table": "users",
                    "column": "id"
                  },
                  "initially_deferred": false,
                  "on_update": null,
                  "on_delete": null
                }
              }
            ]
          },
          {
            "name": "class_id",
            "getter_name": "classId",
            "moor_type": "int",
            "nullable": false,
            "customConstraints": null,
            "defaultConstraints": "REFERENCES classes (id)",
            "dialectAwareDefaultConstraints": {
              "sqlite": "REFERENCES classes (id)"
            },
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": [
              {
                "foreign_key": {
                  "to": {
                    "table": "classes",
                    "column": "id"
                  },
                  "initially_deferred": false,
                  "on_update": null,
                  "on_delete": null
                }
              }
            ]
          },
          {
            "name": "status",
            "getter_name": "status",
            "moor_type": "string",
            "nullable": false,
            "customConstraints": null,
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": []
          },
          {
            "name": "enrolled_at",
            "getter_name": "enrolledAt",
            "moor_type": "dateTime",
            "nullable": true,
            "customConstraints": null,
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": []
          },
          {
            "name": "dropped_at",
            "getter_name": "droppedAt",
            "moor_type": "dateTime",
            "nullable": true,
            "customConstraints": null,
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": []
          },
          {
            "name": "created_at",
            "getter_name": "createdAt",
            "moor_type": "dateTime",
            "nullable": false,
            "customConstraints": null,
            "default_dart": "const CustomExpression('CAST(strftime(\\'%s\\', CURRENT_TIMESTAMP) AS INTEGER)')",
            "default_client_dart": null,
            "dsl_features": []
          }
        ],
        "is_virtual": false,
        "without_rowid": false,
        "constraints": [],
        "unique_keys": [
          [
            "student_user_id",
            "class_id"
          ]
        ]
      }
    },
    {
      "id": 3,
      "references": [
        1
      ],
      "type": "table",
      "data": {
        "name": "class_sessions",
        "was_declared_in_moor": false,
        "columns": [
          {
            "name": "id",
            "getter_name": "id",
            "moor_type": "int",
            "nullable": false,
            "customConstraints": null,
            "defaultConstraints": "PRIMARY KEY AUTOINCREMENT",
            "dialectAwareDefaultConstraints": {
              "sqlite": "PRIMARY KEY AUTOINCREMENT"
            },
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": [
              "auto-increment"
            ]
          },
          {
            "name": "class_id",
            "getter_name": "classId",
            "moor_type": "int",
            "nullable": false,
            "customConstraints": null,
            "defaultConstraints": "REFERENCES classes (id)",
            "dialectAwareDefaultConstraints": {
              "sqlite": "REFERENCES classes (id)"
            },
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": [
              {
                "foreign_key": {
                  "to": {
                    "table": "classes",
                    "column": "id"
                  },
                  "initially_deferred": false,
                  "on_update": null,
                  "on_delete": null
                }
              }
            ]
          },
          {
            "name": "session_at",
            "getter_name": "sessionAt",
            "moor_type": "dateTime",
            "nullable": false,
            "customConstraints": null,
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": []
          },
          {
            "name": "created_at",
            "getter_name": "createdAt",
            "moor_type": "dateTime",
            "nullable": false,
            "customConstraints": null,
            "default_dart": "const CustomExpression('CAST(strftime(\\'%s\\', CURRENT_TIMESTAMP) AS INTEGER)')",
            "default_client_dart": null,
            "dsl_features": []
          }
        ],
        "is_virtual": false,
        "without_rowid": false,
        "constraints": [],
        "unique_keys": [
          [
            "class_id",
            "session_at"
          ]
        ]
      }
    },
    {
      "id": 4,
      "references": [
        2,
        3
      ],
      "type": "table",
      "data": {
        "name": "attendance",
        "was_declared_in_moor": false,
        "columns": [
          {
            "name": "id",
            "getter_name": "id",
            "moor_type": "int",
            "nullable": false,
            "customConstraints": null,
            "defaultConstraints": "PRIMARY KEY AUTOINCREMENT",
            "dialectAwareDefaultConstraints": {
              "sqlite": "PRIMARY KEY AUTOINCREMENT"
            },
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": [
              "auto-increment"
            ]
          },
          {
            "name": "enrollment_id",
            "getter_name": "enrollmentId",
            "moor_type": "int",
            "nullable": false,
            "customConstraints": null,
            "defaultConstraints": "REFERENCES enrollments (id)",
            "dialectAwareDefaultConstraints": {
              "sqlite": "REFERENCES enrollments (id)"
            },
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": [
              {
                "foreign_key": {
                  "to": {
                    "table": "enrollments",
                    "column": "id"
                  },
                  "initially_deferred": false,
                  "on_update": null,
                  "on_delete": null
                }
              }
            ]
          },
          {
            "name": "session_id",
            "getter_name": "sessionId",
            "moor_type": "int",
            "nullable": false,
            "customConstraints": null,
            "defaultConstraints": "REFERENCES class_sessions (id)",
            "dialectAwareDefaultConstraints": {
              "sqlite": "REFERENCES class_sessions (id)"
            },
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": [
              {
                "foreign_key": {
                  "to": {
                    "table": "class_sessions",
                    "column": "id"
                  },
                  "initially_deferred": false,
                  "on_update": null,
                  "on_delete": null
                }
              }
            ]
          },
          {
            "name": "status",
            "getter_name": "status",
            "moor_type": "string",
            "nullable": false,
            "customConstraints": null,
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": []
          },
          {
            "name": "check_in_at",
            "getter_name": "checkInAt",
            "moor_type": "dateTime",
            "nullable": true,
            "customConstraints": null,
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": []
          },
          {
            "name": "note",
            "getter_name": "note",
            "moor_type": "string",
            "nullable": true,
            "customConstraints": null,
            "default_dart": null,
            "default_client_dart": null,
            "dsl_features": []
          },
          {
            "name": "created_at",
            "getter_name": "createdAt",
            "moor_type": "dateTime",
            "nullable": false,
            "customConstraints": null,
            "default_dart": "const CustomExpression('CAST(strftime(\\'%s\\', CURRENT_TIMESTAMP) AS INTEGER)')",
            "default_client_dart": null,
            "dsl_features": []
          }
        ],
        "is_virtual": false,
        "without_rowid": false,
        "constraints": [],
        "unique_keys": [
          [
            "enrollment_id",
            "session_id"
          ]
        ]
      }
    }
  ],
  "fixed_sql": [
    {
      "name": "users",
      "sql": [
        {
          "dialect": "sqlite",
          "sql": "CREATE TABLE IF NOT EXISTS \"users\" (\"id\" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, \"username\" TEXT NOT NULL, \"email\" TEXT NOT NULL, \"password\" TEXT NOT NULL, \"role\" TEXT NOT NULL, \"name\" TEXT NOT NULL, \"lastname\" TEXT NOT NULL, \"phone\" TEXT NULL, \"created_at\" INTEGER NOT NULL DEFAULT (CAST(strftime('%s', CURRENT_TIMESTAMP) AS INTEGER)), \"deleted_at\" INTEGER NULL, UNIQUE (\"username\"), UNIQUE (\"email\"));"
        }
      ]
    },
    {
      "name": "classes",
      "sql": [
        {
          "dialect": "sqlite",
          "sql": "CREATE TABLE IF NOT EXISTS \"classes\" (\"id\" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, \"teacher_user_id\" INTEGER NOT NULL REFERENCES users (id), \"name\" TEXT NOT NULL, \"description\" TEXT NULL, \"capacity\" INTEGER NOT NULL, \"enrollment_open\" INTEGER NOT NULL DEFAULT 1 CHECK (\"enrollment_open\" IN (0, 1)), \"start_date\" INTEGER NULL, \"end_date\" INTEGER NULL, \"created_at\" INTEGER NOT NULL DEFAULT (CAST(strftime('%s', CURRENT_TIMESTAMP) AS INTEGER)), \"deleted_at\" INTEGER NULL);"
        }
      ]
    },
    {
      "name": "enrollments",
      "sql": [
        {
          "dialect": "sqlite",
          "sql": "CREATE TABLE IF NOT EXISTS \"enrollments\" (\"id\" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, \"student_user_id\" INTEGER NOT NULL REFERENCES users (id), \"class_id\" INTEGER NOT NULL REFERENCES classes (id), \"status\" TEXT NOT NULL, \"enrolled_at\" INTEGER NULL, \"dropped_at\" INTEGER NULL, \"created_at\" INTEGER NOT NULL DEFAULT (CAST(strftime('%s', CURRENT_TIMESTAMP) AS INTEGER)), UNIQUE (\"student_user_id\", \"class_id\"));"
        }
      ]
    },
    {
      "name": "class_sessions",
      "sql": [
        {
          "dialect": "sqlite",
          "sql": "CREATE TABLE IF NOT EXISTS \"class_sessions\" (\"id\" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, \"class_id\" INTEGER NOT NULL REFERENCES classes (id), \"session_at\" INTEGER NOT NULL, \"created_at\" INTEGER NOT NULL DEFAULT (CAST(strftime('%s', CURRENT_TIMESTAMP) AS INTEGER)), UNIQUE (\"class_id\", \"session_at\"));"
        }
      ]
    },
    {
      "name": "attendance",
      "sql": [
        {
          "dialect": "sqlite",
          "sql": "CREATE TABLE IF NOT EXISTS \"attendance\" (\"id\" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, \"enrollment_id\" INTEGER NOT NULL REFERENCES enrollments (id), \"session_id\" INTEGER NOT NULL REFERENCES class_sessions (id), \"status\" TEXT NOT NULL, \"check_in_at\" INTEGER NULL, \"note\" TEXT NULL, \"created_at\" INTEGER NOT NULL DEFAULT (CAST(strftime('%s', CURRENT_TIMESTAMP) AS INTEGER)), UNIQUE (\"enrollment_id\", \"session_id\"));"
        }
      ]
    }
  ]
}